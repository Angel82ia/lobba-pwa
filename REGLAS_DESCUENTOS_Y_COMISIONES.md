# REGLAS DE DESCUENTOS Y COMISIONES - SISTEMA LOBBA

## üéØ REGLA FUNDAMENTAL

**LA COMISI√ìN DEL INFLUENCER ES SIEMPRE 10% FIJO**

**EL DESCUENTO AL USUARIO VAR√çA SEG√öN SU MEMBRES√çA:**
- Essential: 10% autom√°tico
- Spirit: 15% autom√°tico

---

## üìä EJEMPLOS CORRECTOS

### CASO 1: Usuario Spirit con C√≥digo Influencer

```
Compra: ‚Ç¨100.00

DESCUENTOS APLICADOS:
‚îú‚îÄ Descuento base Spirit: 15% ‚Üí -‚Ç¨15.00
‚îú‚îÄ C√≥digo influencer:     10% ‚Üí -‚Ç¨10.00
‚îî‚îÄ TOTAL DESCUENTO:       25% ‚Üí -‚Ç¨25.00 (M√ÅXIMO)

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Usuario paga:              ‚Ç¨75.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

COMISI√ìN:
‚îî‚îÄ Influencer: 10% de ‚Ç¨100 = ‚Ç¨10.00

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Ingreso LOBBA:             ‚Ç¨75.00
Pago a influencer:        -‚Ç¨10.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Beneficio neto LOBBA:      ‚Ç¨65.00
```

### CASO 2: Usuario Essential con C√≥digo Influencer

```
Compra: ‚Ç¨100.00

DESCUENTOS APLICADOS:
‚îú‚îÄ Descuento base Essential: 10% ‚Üí -‚Ç¨10.00
‚îú‚îÄ C√≥digo influencer:        10% ‚Üí -‚Ç¨10.00
‚îî‚îÄ TOTAL DESCUENTO:          20% ‚Üí -‚Ç¨20.00

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Usuario paga:              ‚Ç¨80.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

COMISI√ìN:
‚îî‚îÄ Influencer: 10% de ‚Ç¨100 = ‚Ç¨10.00

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Ingreso LOBBA:             ‚Ç¨80.00
Pago a influencer:        -‚Ç¨10.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Beneficio neto LOBBA:      ‚Ç¨70.00
```

### CASO 3: Usuario Sin Membres√≠a con C√≥digo Influencer

```
Compra: ‚Ç¨100.00

DESCUENTOS APLICADOS:
‚îú‚îÄ Descuento base (sin membres√≠a): 0%  ‚Üí ‚Ç¨0.00
‚îú‚îÄ C√≥digo influencer:              10% ‚Üí -‚Ç¨10.00
‚îî‚îÄ TOTAL DESCUENTO:                10% ‚Üí -‚Ç¨10.00

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Usuario paga:              ‚Ç¨90.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

COMISI√ìN:
‚îî‚îÄ Influencer: 10% de ‚Ç¨100 = ‚Ç¨10.00

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Ingreso LOBBA:             ‚Ç¨90.00
Pago a influencer:        -‚Ç¨10.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Beneficio neto LOBBA:      ‚Ç¨80.00
```

---

## üîê REGLAS DE C√ÅLCULO

### 1. Descuento al Usuario

```javascript
// Base seg√∫n membres√≠a
const descuentoBase = {
  'essential': 0.10,  // 10%
  'spirit': 0.15,     // 15%
  'ninguno': 0.00     // 0%
}

// C√≥digo influencer (si aplica)
const descuentoCodigo = 0.10  // Siempre 10%

// Total con l√≠mite
let descuentoTotal = descuentoBase + descuentoCodigo
if (descuentoTotal > 0.25) {
  descuentoTotal = 0.25  // M√ÅXIMO 25%
}

// Precio final
const precioFinal = importeOriginal * (1 - descuentoTotal)
```

### 2. Comisi√≥n Influencer

```javascript
// SIEMPRE sobre el importe ORIGINAL
const comisionInfluencer = importeOriginal * 0.10

// NUNCA sobre el precio con descuento
// ‚ùå INCORRECTO: precioFinal * 0.10
// ‚úÖ CORRECTO:   importeOriginal * 0.10
```

### 3. Ingreso LOBBA

```javascript
// Ingreso bruto (lo que paga el usuario)
const ingresoLOBBA = precioFinal

// Beneficio neto (despu√©s de comisi√≥n)
const beneficioNeto = ingresoLOBBA - comisionInfluencer
```

---

## ‚ö†Ô∏è ERRORES COMUNES A EVITAR

### ‚ùå ERROR 1: Calcular comisi√≥n sobre precio con descuento
```javascript
// MAL
const comision = precioFinal * 0.10  // ‚ùå

// BIEN
const comision = importeOriginal * 0.10  // ‚úÖ
```

### ‚ùå ERROR 2: Sumar comisi√≥n al descuento
```javascript
// MAL: Interpretar que el c√≥digo da 10% + comisi√≥n 10% = 20% total
const descuentoTotal = 0.15 + 0.10 + 0.10  // ‚ùå = 35%

// BIEN: El c√≥digo da 10% de descuento, la comisi√≥n es aparte
const descuentoTotal = 0.15 + 0.10  // ‚úÖ = 25%
const comision = importeOriginal * 0.10  // ‚úÖ Se calcula aparte
```

### ‚ùå ERROR 3: Restar comisi√≥n del ingreso en el c√°lculo
```javascript
// MAL: Confundir "ingreso" con "beneficio neto"
const ingresoLOBBA = precioFinal - comision  // ‚ùå

// BIEN: El ingreso es lo que paga el usuario
const ingresoLOBBA = precioFinal  // ‚úÖ
const beneficioNeto = ingresoLOBBA - comision  // ‚úÖ (esto es aparte)
```

---

## üìã RESUMEN EJECUTIVO

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         REGLAS INMUTABLES DEL SISTEMA           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                 ‚îÇ
‚îÇ 1. Comisi√≥n influencer: SIEMPRE 10% FIJO       ‚îÇ
‚îÇ    ‚îî‚îÄ Se calcula sobre importe ORIGINAL        ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ 2. Descuento usuario: VARIABLE seg√∫n membres√≠a ‚îÇ
‚îÇ    ‚îú‚îÄ Essential: 10% base                      ‚îÇ
‚îÇ    ‚îú‚îÄ Spirit: 15% base                         ‚îÇ
‚îÇ    ‚îî‚îÄ Sin membres√≠a: 0% base                   ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ 3. C√≥digo influencer: A√±ade 10% de descuento   ‚îÇ
‚îÇ    ‚îî‚îÄ Se SUMA al descuento base                ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ 4. Descuento m√°ximo total: 25%                 ‚îÇ
‚îÇ    ‚îî‚îÄ No importa la combinaci√≥n                ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ 5. Ingreso LOBBA = Lo que paga el usuario      ‚îÇ
‚îÇ    ‚îî‚îÄ La comisi√≥n se paga DESPU√âS              ‚îÇ
‚îÇ                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üßÆ F√ìRMULAS DEFINITIVAS

```javascript
// PASO 1: Calcular descuento total
const descuentoBase = DESCUENTO_MEMBRESIA[membershipType]  // 0, 0.10 o 0.15
const descuentoCodigo = tieneCodigo ? 0.10 : 0.00
let descuentoTotal = descuentoBase + descuentoCodigo
if (descuentoTotal > 0.25) descuentoTotal = 0.25

// PASO 2: Calcular precio que paga usuario
const importeDescuento = importeOriginal * descuentoTotal
const precioFinal = importeOriginal - importeDescuento

// PASO 3: Calcular comisi√≥n (sobre ORIGINAL)
const comisionInfluencer = tieneCodigo ? (importeOriginal * 0.10) : 0

// PASO 4: Resultados
return {
  importeOriginal,        // ‚Ç¨100
  descuentoTotal,         // 25% (0.25)
  importeDescuento,       // ‚Ç¨25
  precioFinal,            // ‚Ç¨75 (lo que paga el usuario)
  ingresoLOBBA: precioFinal,  // ‚Ç¨75
  comisionInfluencer,     // ‚Ç¨10
  beneficioNetoLOBBA: precioFinal - comisionInfluencer  // ‚Ç¨65
}
```
